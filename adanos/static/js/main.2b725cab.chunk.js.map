{"version":3,"sources":["serviceWorker.js","components/Start.js","components/Running.js","components/Result.js","actions/actionTypes.js","actions/process.js","const/consts.js","locale/index.js","locale/en_US.js","locale/zh_CN.js","locale/id_ID.js","containers/main.js","actions/localeActions.js","withRoot.js","reducers/userReducer.js","reducers/processReducer.js","reducers/localesReducer.js","reducers/index.js","services/api.js","geomaths/tilemath.js","util/util.js","benchmark/benchmark.js","epics/index.js","epics/userEpics.js","epics/processEpics.js","store/configureStore.js","connectedIntlProvider.js","index.js"],"names":["Boolean","window","location","hostname","match","Start","state","selectedSampleId","_handleChange","name","event","_this","setState","parseInt","target","value","_launcher","sampleId","props","sampleCoords","id","launch","_this$props","this","classes","intl","react_default","a","createElement","className","root","FormControl_default","formControl","FormHelperText_default","selectLabel","component","index_es","NativeSelect_default","onChange","selectEmpty","map","sample","key","concat","formatMessage","intlId","coordinate","latitude","longitude","Fab_default","onClick","color","aria-label","launcher","Component","withStyles","theme","display","flexDirection","alignItems","minWidth","marginTop","marginRight","fontSize","margin","spacing","unit","width","height","fontWeight","injectIntl","Running","scrollTop","scrollToBottom","messagesEnd","scrollIntoView","behavior","onScroll","currentTarget","messagesBox","scrollHeight","clientHeight","_this2","testingItems","testingSample","requestNum","progress","length","toFixed","tipTitle","values","where","progressBox","CircularProgress_default","size","variant","progressLabel","detailBox","ref","el","item","resClass","duration","green","warn","stateTag","error","gray","testItem","Chip_default","fromType","label","type","style","url","position","justifyContent","top","left","marginLeft","padding","overflow","backgroundColor","Result","getOption","testResult","title","text","tooltip","trigger","formatter","datas","res","split","legend","data","grid","right","bottom","containLabel","xAxis","boundaryGap","splitLine","show","list","i","push","yAxis","axisLabel","series","itemStyle","borderColor","smooth","symbolOffset","map3Data","map3","stack","normal","barBorderColor","emphasis","barWidth","osmData","osm","barGap","_this$props2","testAgain","lib_default","option","notMerge","Button_default","btnTestAgain","paddingTop","REQUEST_CHANGE_USER_NAME","RECEIVED_USER_NAME","REQUEST_USER_NAME_FAIL","CANCEL_REQUEST_USER_NAME","ADD_USER_LOCATION_COORDINATE","BENCHMARK","PRE_START","TICK_RUNNING_ITEM","TICK_CALCULATE_RESULT","TICK_ERROR_ITEM","TICK_FINISH_ITEM","FINISH_BENCKMARK","TEST_AGAIN","CHANGE_LANGUAGE","tickFinishItem","ActionTypes","finishBenchmark","maxLevel","CONSTS","PROCESS_STATE_START","PROCESS_STATE_RUNNING","PROCESS_STATE_FINISH","supportedLocales","lang","desc","messages","selectLocationLabel","start","testRunningLabel","compareResult","avgTime","minTime","maxTime","myPosition","BandungCityPark","BandungShoppingCenter","JakartaMilitaryMuseum","JakartaGBKS","addLocaleData","Object","toConsumableArray","en","zh","BootstrapInput","input","textAlign","InputBase","Main","open","_launch","selectedId","sampleMatchList","process","filter","benchmark","_testAgain","_getLocation","navigator","geolocation","getCurrentPosition","userCoordinateItem","coords","addUserLocationSample","console","log","handleLanguageChange","changeLanguage","handleClose","handleOpen","setTimeout","stepView","locales","components_Start","components_Running","components_Result","AppBar_default","Toolbar_default","src","alt","logoImg","Typography_default","grow","description","languageFormControl","Select_default","onClose","onOpen","IconComponent","locale","MenuItem_default","content","connect","ownProps","userName","user","userNameState","userSample","flexGrow","createMuiTheme","typography","useNextVariants","withRoot","styles","CssBaseline_default","userState","loading","errorMsg","canceled","processState","sessionStorage","getItem","language","selectedLocale","findLocale","localeState","objectSpread","combineReducers","arguments","undefined","action","payload","splice","unshift","searchItem","findTestingItemIdx","types","levelVar","forEach","z","testingItemsForCharts","api","Observable","fetch","mode","pipe","delay","ret","ramdom","Math","random","Error","Tile","x","y","lat","long","classCallCheck","createClass","lon","zoom","floor","pow","tan","PI","cos","lat2tile","n","atan","exp","tile2lat","newTileWithLatLong","tile","deg2num","hashCode","s","h","l","charCodeAt","fetchObs","from","fetch_promise","timeout","abort_fn","abort_promise","Promise","resolve","reject","abortable_promise","race","_fetch","Date","getTime","cache","then","what","newResultItemByUrlAndZ","TileTestTask","requestTimes","range","concatMap","of","osmTileUrl","map3TileUrl","getResourceDuration","resource","responseEnd","startTime","newResultItemByUrl","splitTarget","t","urls","tick","combineEpics","actions$","ofType","mergeMap","toUpperCase","takeUntil","catchError","message","state$","performance","clearResourceTimings","setResourceTimingBufferSize","tiles","level","generateTestTiles","apply","num","act","params","coordinates","response_time","method","headers","Headers","Content-Type","body","JSON","stringify","json","postResult","calculateItemTiming","tickErrorItem","emitter","retryTimes","calculateFun","resources","getEntriesByType","includes","resourceTimingDuration","next","complete","epicMiddleware","createEpicMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","_state$locales","IntlProvider","store","createStore","rootReducer","applyMiddleware","logger","run","rootEpic","configureStore","App","es","connectedIntlProvider","BrowserRouter","basename","Switch","Route","exact","path","NoMatch","_ref","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2b725cab.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React, {Component} from 'react'\nimport {withStyles} from \"@material-ui/core\";\nimport * as PropTypes from \"prop-types\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport NativeSelect from \"@material-ui/core/NativeSelect\";\nimport Fab from \"@material-ui/core/Fab\";\nimport {FormattedMessage, injectIntl} from \"react-intl\";\n\nclass Start extends Component {\n  static propTypes = {\n    classes: PropTypes.object.isRequired,\n    launch: PropTypes.func,\n    selectedSampleId: PropTypes.number,\n    sampleCoords: PropTypes.array\n  }\n\n  state = {\n    selectedSampleId: 0\n  }\n\n  _handleChange = name => event => {\n    this.setState({selectedSampleId: parseInt(event.target.value)})\n  }\n\n  _launcher = () => {\n    let sampleId = this.state.selectedSampleId\n    if (sampleId === 0) {\n      sampleId = this.props.sampleCoords[0].id\n    }\n    this.props.launch(parseInt(sampleId))\n  }\n\n  // componentDidMount() {\n    // this.setState({selectedSampleId: this.props.selectedSampleId})\n  // }\n\n  render() {\n    const {classes, sampleCoords, intl} = this.props;\n    return (\n      <div className={classes.root}>\n        <FormControl className={classes.formControl}>\n          <FormHelperText className={classes.selectLabel} component={'div'}>\n            <FormattedMessage id='selectLocationLabel'/>\n          </FormHelperText>\n          <NativeSelect\n            value={this.state.selectedSampleId}\n            onChange={this._handleChange()}\n            name=\"sampleCoordinate\"\n            className={classes.selectEmpty}\n          >\n            {\n              sampleCoords.map(sample => {\n                return <option key={sample.id}\n                               value={sample.id}>{`${intl.formatMessage({id: sample.intlId})} ${sample.coordinate.latitude},${sample.coordinate.longitude}`}</option>\n              })\n            }\n          </NativeSelect>\n        </FormControl>\n        <Fab onClick={this._launcher} color=\"secondary\" aria-label=\"Add\"\n             className={classes.launcher}>\n          <FormattedMessage id='start'/>\n        </Fab>\n      </div>\n    )\n  }\n}\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  formControl: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    minWidth: 200,\n    marginTop: '50px'\n  },\n  selectLabel: {\n    marginRight: '20px',\n    fontSize: '16px',\n    color: '#666',\n  },\n  selectEmpty: {},\n  launcher: {\n    margin: theme.spacing.unit,\n    width: '100px',\n    height: '100px',\n    color: 'white',\n    marginTop: '60px',\n    fontSize: '20px',\n    fontWeight: 400\n  }\n})\n\nexport default withStyles(styles)(injectIntl(Start))","import React, {Component} from 'react'\nimport {withStyles} from \"@material-ui/core\";\nimport * as PropTypes from \"prop-types\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Chip from \"@material-ui/core/Chip\";\nimport {FormattedMessage, injectIntl} from \"react-intl\";\n\nclass Running extends Component {\n  static propTypes = {\n    classes: PropTypes.object.isRequired,\n    testingItems: PropTypes.array,\n    testingSample: PropTypes.object,\n    requestNum: PropTypes.number\n  }\n\n  scrollTop = 0\n\n  scrollToBottom = () => {\n    this.messagesEnd.scrollIntoView({behavior: \"smooth\"});\n  }\n\n  componentDidUpdate() {\n    if (this.messagesBox.scrollHeight - this.messagesBox.clientHeight - 70 <= this.scrollTop) {\n      this.scrollToBottom();\n    }\n  }\n\n  onScroll = (event) => {\n    this.scrollTop = event.currentTarget.scrollTop\n  }\n\n  render() {\n    const {classes, testingItems, testingSample, requestNum, intl} = this.props;\n    let finishNum = testingItems.length\n    let progress = (finishNum / requestNum * 100).toFixed(1)\n\n    return (\n      <div className={classes.root}>\n        <div className={classes.tipTitle}>\n          <FormattedMessage\n            id=\"testRunningLabel\"\n            values={{\n              where: <font\n                color={'#232323'}> [{`${intl.formatMessage({id: testingSample.intlId})} ${testingSample.coordinate.latitude},${testingSample.coordinate.longitude}`}] </font>\n            }}\n          />\n        </div>\n        <div className={classes.progressBox}>\n          <CircularProgress size={100} variant={progress > 99 ? 'indeterminate' : 'static'}\n                            value={parseInt(progress)}/>\n          <div className={classes.progressLabel}>{progress}%</div>\n        </div>\n        <div className={classes.detailBox} onScroll={this.onScroll} ref={(el) => {\n          this.messagesBox = el;\n        }}>\n          {\n            testingItems.map(item => {\n              let resClass = item.duration < 100 ? classes.green : classes.warn\n              let stateTag = item.state === 'finish' ?\n                <div\n                  className={resClass}> {parseInt(item.duration)}ms</div> : (item.state === 'error' ?\n                  <div className={classes.error}>error</div> :\n                  <div className={classes.gray}>running...</div>)\n              return (\n                <div className={classes.testItem} key={item.id}>\n                  <Chip className={classes.fromType}\n                        label={item.type}\n                        color={item.type === 'map3' ? 'primary' : 'secondary'}\n                  />\n                  <div style={{fontSize: '14px', color: '#999'}}>{item.url} </div>\n                  {stateTag}\n                </div>\n              )\n            })\n          }\n          <div ref={(el) => {\n            this.messagesEnd = el;\n          }}/>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst styles = theme => ({\n  root: {},\n  tipTitle: {\n    margin: '16px',\n    color: '#666'\n  },\n  progressBox: {\n    position: 'relative',\n    marginTop: '16px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  progressLabel: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '18px',\n    fontWeight: 400,\n    color: '#666',\n  },\n  detailBox: {\n    marginTop: '32px',\n    marginLeft: '16px',\n    marginRight: '16px',\n    padding: '8px',\n    color: '#666',\n    height: '300px',\n    overflow: 'auto',\n    backgroundColor: 'white'\n  },\n  testItem: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: '8px',\n  },\n  fromType: {\n    color: 'white',\n    height: '20px',\n    marginRight: '16px',\n    fontSize: '12px'\n  },\n  green: {\n    color: '#47a23a',\n    marginLeft: '16px',\n    fontSize: '14px'\n  },\n  warn: {\n    color: '#f98300',\n    marginLeft: '16px',\n    fontSize: '14px'\n  },\n  error: {\n    color: '#ce3733',\n    marginLeft: '16px',\n    fontSize: '14px'\n  },\n  gray: {\n    color: '#666',\n    marginLeft: '16px',\n    fontSize: '14px'\n  },\n})\n\nexport default withStyles(styles)(injectIntl(Running))","import React, {Component} from 'react'\nimport {withStyles} from \"@material-ui/core\";\nimport * as PropTypes from \"prop-types\";\nimport ReactEcharts from \"echarts-for-react\";\nimport Button from \"@material-ui/core/Button\";\nimport {FormattedMessage, injectIntl} from \"react-intl\";\n\nclass Result extends Component {\n  static propTypes = {\n    classes: PropTypes.object.isRequired,\n    testAgain: PropTypes.func,\n    testResult: PropTypes.object,\n    testingItems: PropTypes.array,\n    intl: PropTypes.object\n  }\n\n  getOption = () => {\n    const {intl, testResult} = this.props\n    return {\n      title: {\n        text: intl.formatMessage({id: 'compareResult'})\n      },\n      tooltip: {\n        trigger: 'axis',\n        formatter: function (datas) {\n          let res = `<strong>Zoom Level ${datas[0].name.split('-')[1]}</strong><br/><br/>` //, val;\n          if (datas[0])\n            res += `map3 ${intl.formatMessage({id: 'avgTime'})}: ${datas[0].value.toFixed(1)} ms<br/>`\n          if (datas[1])\n            res += `map3 ${intl.formatMessage({id: 'minTime'})}: ${datas[1].value.toFixed(1)} ms<br/>`\n          if (datas[2])\n            res += `map3 ${intl.formatMessage({id: 'maxTime'})}: ${(datas[2].value + datas[1].value).toFixed(1)} ms<br/><br/>`\n\n          if (datas[3])\n            res += `osm ${intl.formatMessage({id: 'avgTime'})}: ${datas[3].value.toFixed(1)} ms<br/>`\n          if (datas[4])\n            res += `osm ${intl.formatMessage({id: 'minTime'})}: ${datas[4].value.toFixed(1)} ms<br/>`\n          if (datas[5])\n            res += `osm ${intl.formatMessage({id: 'maxTime'})}: ${(datas[5].value + datas[4].value).toFixed(1)} ms<br/>`\n          // for (let i = 0, length = datas.length; i < length; i++) {\n          //   val = (datas[i].value) + ' ms';\n          //   res += datas[i].seriesName + '：' + val + '<br/>';\n          // }\n          return res;\n        },\n      },\n      legend: {\n        data: ['map3', 'osm']\n      },\n      grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true\n      },\n      xAxis: [\n        {\n          type: 'category',\n          boundaryGap: true,\n          splitLine: {show: false},\n          data: function () {\n            let list = []\n            for (let i = 1; i <= 14; i++) {\n              list.push(`z-${i}`)\n            }\n            return list\n          }()\n        }\n      ],\n      yAxis: [\n        {\n          type: 'value',\n          axisLabel: {\n            formatter: '{value} ms'\n          }\n        },\n      ],\n      series: [\n        {\n          name: 'map3Avg',\n          type: 'line',\n          itemStyle: {\n            color: '#269ff1',\n            borderColor: '#269ff1',\n          },\n          smooth: true,\n          symbolOffset: ['-50%', 0],\n          data: function () {\n            let map3Data = testResult.map3\n            let list = []\n            for (let i = 0; i < map3Data.length; i++) {\n              list.push(map3Data[i][2])\n            }\n            return list\n          }()\n        },\n        {\n          name: 'map3Min',\n          type: 'bar',\n          stack: 'map3',\n          itemStyle: {\n            normal: {\n              barBorderColor: 'rgba(0,0,0,0)',\n              color: 'rgba(0,0,0,0)'\n            },\n            emphasis: {\n              barBorderColor: 'rgba(0,0,0,0)',\n              color: 'rgba(0,0,0,0)'\n            }\n          },\n          data: function () {\n            let map3Data = testResult.map3\n            let list = []\n            for (let i = 0; i < map3Data.length; i++) {\n              list.push(map3Data[i][0])\n            }\n            return list\n          }()\n        },\n        {\n          name: 'map3',\n          type: 'bar',\n          stack: 'map3',\n          barWidth: 2,\n          itemStyle: {\n            color: '#269ff1',\n            borderColor: '#269ff1',\n          },\n          data: function () {\n            let map3Data = testResult.map3\n            let list = []\n            for (let i = 0; i < map3Data.length; i++) {\n              list.push(map3Data[i][1] - map3Data[i][0])\n            }\n            return list\n          }()\n        },\n        {\n          name: 'osmAvg',\n          type: 'line',\n          // areaStyle: {normal: {}},\n          itemStyle: {\n            color: '#e90046',\n            borderColor: '#e90046',\n          },\n          smooth: true,\n          symbolOffset: ['50%', 0],\n          data: function () {\n            let osmData = testResult.osm\n            let list = []\n            for (let i = 0; i < osmData.length; i++) {\n              list.push(osmData[i][2])\n            }\n            return list\n          }()\n        },\n        {\n          name: 'osmMin',\n          type: 'bar',\n          stack: 'osm',\n          itemStyle: {\n            normal: {\n              barBorderColor: 'rgba(0,0,0,0)',\n              color: 'rgba(0,0,0,0)'\n            },\n            emphasis: {\n              barBorderColor: 'rgba(0,0,0,0)',\n              color: 'rgba(0,0,0,0)'\n            }\n          },\n          data: function () {\n            let osmData = testResult.osm\n            let list = []\n            for (let i = 0; i < osmData.length; i++) {\n              list.push(osmData[i][0])\n            }\n            return list\n          }()\n        },\n        {\n          name: 'osm',\n          type: 'bar',\n          stack: 'osm',\n          barWidth: 2,\n          barGap: '100%',\n          itemStyle: {\n            color: '#e90046',\n            borderColor: '#e90046',\n          },\n          data: function () {\n            let osmData = testResult.osm\n            let list = []\n            for (let i = 0; i < osmData.length; i++) {\n              list.push(osmData[i][1] - osmData[i][0])\n            }\n            return list\n          }()\n        },\n      ]\n    };\n  }\n\n  render() {\n    const {classes, testAgain} = this.props;\n    return (\n      <div className={classes.root}>\n        <ReactEcharts\n          option={this.getOption()}\n          style={{height: '350px', width: '90%'}}\n          notMerge={false}\n          className='react_for_echarts'/>\n\n        <Button onClick={testAgain} variant=\"contained\" size=\"large\" color=\"primary\"\n                className={classes.btnTestAgain}>\n          <FormattedMessage id='testAgain'/>\n        </Button>\n\n      </div>\n    )\n  }\n}\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    paddingTop: '40px',\n  },\n  btnTestAgain: {\n    marginTop: '40px',\n  }\n})\n\nexport default withStyles(styles)(injectIntl(Result))","export const REQUEST_CHANGE_USER_NAME = 'requestChangeUserName'\nexport const RECEIVED_USER_NAME = 'receivedUserName';\nexport const REQUEST_USER_NAME_FAIL = 'requestUserNameFail'\nexport const CANCEL_REQUEST_USER_NAME = 'cancelRequestUserName'\n\n//process\n// export const CHANGE_PROCESS_STATE = 'changeProcessState'\n// export const SET_SELECTED_SAMPLE_COORDINATE = 'setSelectedSampleCoordinate'\nexport const ADD_USER_LOCATION_COORDINATE = 'addUserLocationCoordinate'\n\nexport const BENCHMARK = 'benchmark'\nexport const PRE_START = 'preStart'\n// export const TICK_RESULT = 'tickResult'\nexport const TICK_RUNNING_ITEM = 'tickRunningItem'\nexport const TICK_CALCULATE_RESULT = 'calculateItemResult'\nexport const TICK_ERROR_ITEM = 'tickErrorItem'\nexport const TICK_FINISH_ITEM = 'tickFinishItem'\nexport const FINISH_BENCKMARK = 'finishBenchmark'\nexport const TEST_AGAIN = 'testAgain'\n// export const SET_TEST_RESULT = 'setTestResult'\n\n//locale\nexport const CHANGE_LANGUAGE = 'changeLanguage'","import * as ActionTypes from \"./actionTypes\";\n\n// export function setProcessState(state) {\n//   return {\n//     type: ActionTypes.CHANGE_PROCESS_STATE,\n//     payload: state\n//   }\n// }\n\n// export function setSelectedSampleCoordinate(sampleId) {\n//   return {\n//     type: ActionTypes.SET_SELECTED_SAMPLE_COORDINATE,\n//     payload: sampleId\n//   }\n// }\n\nexport function addUserLocationSample(userSample) {\n  return {\n    type: ActionTypes.ADD_USER_LOCATION_COORDINATE,\n    userSample\n  }\n}\n\nexport function benchmark(sample) {\n  return {\n    type: ActionTypes.BENCHMARK,\n    sample\n  }\n}\n\nexport function preStart(requestNum) {\n  return {\n    type: ActionTypes.PRE_START,\n    requestNum\n  }\n}\n\n// export function setTestResult(result) {\n//   return {\n//     type: ActionTypes.SET_TEST_RESULT,\n//     payload: result\n//   }\n// }\n\n// export function tickResult(item) {\n//   return {\n//     type: ActionTypes.TICK_RESULT,\n//     payload: item\n//   }\n// }\n\nexport function tickRunningItem(item) {\n  return {\n    type: ActionTypes.TICK_RUNNING_ITEM,\n    item\n  }\n}\n\nexport function calculateItemTiming(item) {\n  return {\n    type: ActionTypes.TICK_CALCULATE_RESULT,\n    item\n  }\n}\n\nexport function tickErrorItem(item, error) {\n  return {\n    type:ActionTypes.TICK_ERROR_ITEM,\n    item,\n    error\n  }\n}\n\nexport function tickFinishItem(item) {\n  return {\n    type: ActionTypes.TICK_FINISH_ITEM,\n    item\n  }\n}\n\nexport function finishBenchmark(maxLevel) {\n  return {\n    type: ActionTypes.FINISH_BENCKMARK,\n    maxLevel\n  }\n}\n\nexport function testAgain() {\n  return {\n    type: ActionTypes.TEST_AGAIN\n  }\n}","const CONSTS = {\n  PROCESS_STATE_START: 1,\n  PROCESS_STATE_RUNNING: 2,\n  PROCESS_STATE_FINISH: 3,\n}\n\nexport default CONSTS","import en_US from \"./en_US\";\nimport zh_CN from \"./zh_CN\";\nimport id_ID from \"./id_ID\";\n\nexport const supportedLocales = [\n  {lang: 'en', desc: 'English', messages: en_US},\n  {lang: 'zh', desc: '简体中文', messages: zh_CN},\n  {lang: 'id', desc: 'Bahasa Indonesia', messages: id_ID},\n]","const en_US = {\n  title: 'Map Tile network quality Speedtest',\n  selectLocationLabel: 'Select Test Coordinate',\n  start: 'Start',\n  testRunningLabel: 'Running Test {where}',\n  testAgain: 'Test Again',\n  compareResult: 'Compare Speed Test Result',\n  avgTime: 'avg time',\n  minTime: 'min time',\n  maxTime: 'max time',\n  myPosition: 'My Position',\n  BandungCityPark: 'Bandung City Plaza',\n  BandungShoppingCenter: 'Bandung Shopping Center',\n  JakartaMilitaryMuseum: 'Jakarta Military Museum',\n  JakartaGBKS: 'Jakarta Gloria Bung Karno Stadium'\n}\n\nexport default en_US","const zh_CN = {\n  title: '地图瓦片网络质量测速',\n  selectLocationLabel: '选择测试坐标：',\n  start: '启动',\n  testRunningLabel: '正在测试 {where} 地图数据',\n  testAgain: '再测一次',\n  compareResult: '测速结果对比',\n  avgTime: '平均时间',\n  minTime: '最小时间',\n  maxTime: '最大时间',\n  myPosition: '我的位置',\n  BandungCityPark: '万隆城市广场',\n  BandungShoppingCenter: '万隆购物中心',\n  JakartaMilitaryMuseum: '雅加达军事博物馆',\n  JakartaGBKS: '雅加达格罗拉蓬卡诺体育场'\n}\n\nexport default zh_CN","const id_ID = {\n  title: 'Kecepatan kualitas jaringan ubin peta',\n  selectLocationLabel: 'Pilih Koordinat Uji：',\n  start: 'Awal',\n  testRunningLabel: 'Uji Rentetan {where}',\n  testAgain: 'Uji Lagi',\n  compareResult: 'Banding Hasil Uji Kecepatan',\n  avgTime: 'waktu rata-rata',\n  minTime: 'waktu minumum',\n  maxTime: 'waktu maksimum',\n  myPosition: 'Lokasiku',\n  BandungCityPark: 'Alun Alun Kota Bandung',\n  BandungShoppingCenter: 'Cihampelas Walk',\n  JakartaMilitaryMuseum: 'Jakarta Satriamandala Museum',\n  JakartaGBKS: 'Stadion Utama Gelora Bung Karno'\n}\n\nexport default id_ID","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {withStyles} from \"@material-ui/core\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Start from \"../components/Start\";\nimport Running from \"../components/Running\";\nimport Result from \"../components/Result\";\nimport {\n  addUserLocationSample,\n  benchmark,\n  changeLanguage,\n  finishBenchmark,\n  testAgain,\n  tickFinishItem\n} from \"../actions\";\n\nimport CONSTS from \"../const/consts\";\n\nimport {supportedLocales} from \"../locale\";\n\nimport en from 'react-intl/locale-data/en'\nimport zh from 'react-intl/locale-data/zh'\nimport id from 'react-intl/locale-data/id'\n\nimport {addLocaleData, FormattedMessage, injectIntl} from \"react-intl\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Select from \"@material-ui/core/Select\";\nimport InputBase from \"@material-ui/core/InputBase\";\n\naddLocaleData([...en, ...zh, ...id])\n\nconst BootstrapInput = withStyles(theme => ({\n  root: {},\n  input: {\n    color: 'white',\n    position: 'relative',\n    fontSize: 16,\n    width: 'auto',\n    minWidth: '70px',\n    textAlign: 'right',\n  },\n}))(InputBase);\n\nclass Main extends Component {\n\n  state = {\n    open: false,\n  }\n\n  _launch = (selectedId) => {\n    // console.log(performance.getEntriesByType(\"resource\"))\n    // return\n    let samples = this.props.process.sampleCoords\n    let sampleMatchList = samples.filter(sample => sample.id === selectedId)\n    if (sampleMatchList && sampleMatchList.length > 0) {\n      let sample = sampleMatchList[0]\n      this.props.benchmark(sample)\n    }\n  }\n\n  _testAgain = () => {\n    this.props.testAgain()\n  }\n\n  _getLocation = () => {\n    navigator.geolocation.getCurrentPosition(position => {\n      let userCoordinateItem = {\n        id: 1,\n        intlId: 'myPosition',\n        coordinate: {longitude: position.coords.longitude, latitude: position.coords.latitude}\n      }\n      this.props.addUserLocationSample(userCoordinateItem)\n    }, (error) => {\n      console.log(error)\n    })\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this._getLocation()\n    }, 200)\n\n    // this.observer = new PerformanceObserver((list, obj) => {\n    //   let entries = list.getEntries()\n    //   for (let i = 0; i < entries.length; i++) {\n    //     console.log(entries[i], entries[i].name)\n    //     let url = entries[i].name\n    //     // let res = newResultItemByUrlAndPerformanceResTiming(url, entries[i])\n    //     // if (res) {\n    //     //   this.props.tickFinishItem(res)\n    //     // }\n    //   }\n    // })\n    // this.observer.observe({entryTypes: ['resource']})\n  }\n\n  // componentWillUnmount() {\n  //   this.observer.disconnect()\n  // }\n\n  handleLanguageChange = event => {\n    this.props.changeLanguage(event.target.value)\n  }\n\n  handleClose = () => {\n    this.setState({open: false});\n  };\n\n  handleOpen = () => {\n    this.setState({open: true});\n  };\n\n  render() {\n    const {classes, process, locales} = this.props\n    let stepView\n    switch (process.state) {\n      case CONSTS.PROCESS_STATE_START:\n        stepView = <Start\n          launch={this._launch}\n          sampleCoords={process.sampleCoords}\n        />\n        break\n      case CONSTS.PROCESS_STATE_RUNNING:\n        stepView = <Running testingItems={process.testingItems}\n                            testingSample={process.testingSample}\n                            requestNum={process.requestNum}\n        />\n        break\n      case CONSTS.PROCESS_STATE_FINISH:\n        stepView = <Result testAgain={this._testAgain}\n                           testingItems={process.testingItems}\n                           testResult={process.testResult}/>\n        break\n      default:\n        stepView = <div/>\n    }\n\n    return (\n      <div className={classes.root}>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <img src=\"img/logo.svg\" alt='logo' className={classes.logoImg}/>\n            <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\n              <FormattedMessage\n                id='title'\n                description='title of website'\n              />\n            </Typography>\n\n            <div>\n              <FormControl className={classes.languageFormControl}>\n                <Select\n                  open={this.state.open}\n                  onClose={this.handleClose}\n                  onOpen={this.handleOpen}\n                  value={locales.lang}\n                  onChange={this.handleLanguageChange}\n                  IconComponent={() => {\n                    return <div/>\n                  }}\n                  input={<BootstrapInput name=\"age\" id=\"age-customized-select\"/>}\n                >\n                  {\n                    supportedLocales.map(locale => {\n                      return <MenuItem key={locale.lang}\n                                       value={locale.lang}>{locale.desc}</MenuItem>\n                    })\n                  }\n                </Select>\n              </FormControl>\n            </div>\n\n            {/*<Button onClick={() => {sessionStorage.setItem('lang', 'en'); this.props.changeLanguage('en')}}>English</Button>*/}\n            {/*<Button onClick={() => {sessionStorage.setItem('lang', 'zh'); this.props.changeLanguage('zh')}}>中文</Button>*/}\n          </Toolbar>\n        </AppBar>\n\n        <div className={classes.content}>\n          {stepView}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n    height: '100vh',\n    width: '100%',\n  },\n  content: {},\n  grow: {\n    flexGrow: 1,\n    color: '#fff'\n  },\n  logoImg: {\n    width: '40px',\n    height: '40px',\n    marginLeft: -12,\n    marginRight: 20,\n  },\n  languageFormControl: {\n    color: 'white'\n  }\n})\n\n//see: https://react-redux.js.org/api/connect\nexport default connect(\n  (state, ownProps) => ({\n    userName: state.user.userName,\n    userNameState: state.user.userNameState,\n    process: state.process,\n    locales: state.locales\n  }),               //mapStateToProps\n  {\n    addUserLocationSample,\n    benchmark,\n    testAgain,\n    tickFinishItem,\n    finishBenchmark,\n    changeLanguage\n  }                //mapDispatchToProps\n)(withStyles(styles)(injectIntl(Main)))","import * as ActionTypes from \"./actionTypes\";\n\nexport function changeLanguage(lang) {\n  return {\n    type: ActionTypes.CHANGE_LANGUAGE,\n    lang\n  }\n}","import React from 'react';\nimport {MuiThemeProvider, createMuiTheme} from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n// import {lightBlue, green} from \"@material-ui/core/colors\";\n\n// A theme with custom primary and secondary color.\n// It's optional.\nconst theme = createMuiTheme(\n  {\n    // palette: {\n    //   primary: {\n    //     light: lightBlue[300],\n    //     main: lightBlue[500],\n    //     dark: lightBlue[700],\n    //   },\n    //   secondary: {\n    //     light: green[300],\n    //     main: green[500],\n    //     dark: green[700],\n    //   },\n    // },\n    typography: {\n      useNextVariants: true,\n    },\n  }\n);\n\nfunction withRoot(Component) {\n  function WithRoot(props) {\n    // MuiThemeProvider makes the theme available down the React tree\n    // thanks to React context.\n    return (\n      <MuiThemeProvider theme={theme}>\n        {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n        <CssBaseline/>\n        <Component {...props} />\n      </MuiThemeProvider>\n    );\n  }\n\n  return WithRoot;\n}\n\nexport default withRoot;","import * as ActionTypes from '../actions/actionTypes'\n\nconst userState = {\n  userName: 'LiLei',\n  userNameState: {\n    loading: false,\n    errorMsg: '',\n    canceled: false\n  }\n}\n\nexport default function userReducer(state = userState, action) {\n  switch (action.type) {\n    case ActionTypes.REQUEST_CHANGE_USER_NAME:\n      return {...state, userNameState: {loading: true, errorMsg: ''}}\n    case ActionTypes.RECEIVED_USER_NAME:\n      return {...state, userName: action.payload, userNameState: {loading: false, errorMsg: ''}}\n    case ActionTypes.REQUEST_USER_NAME_FAIL:\n      return {...state, userNameState: {loading: false, errorMsg: action.payload}}\n    case ActionTypes.CANCEL_REQUEST_USER_NAME:\n      return {...state, userNameState: {canceled: true}}\n    default:\n      return state\n  }\n}","import * as ActionTypes from '../actions/actionTypes'\nimport CONSTS from \"../const/consts\";\n\nconst processState = {\n  state: CONSTS.PROCESS_STATE_START,\n  sampleCoords: [\n    {id: 2, intlId: 'BandungCityPark', coordinate: {longitude: 107.607190, latitude: -6.921487}},\n    {id: 3, intlId: 'BandungShoppingCenter', coordinate: {longitude: 107.605327, latitude: -6.893337}},\n    // {id: 4, intlId: 'JakartaMilitaryMuseum', coordinate: {longitude: 106.818498, latitude: -6.231728}}\n    {id: 5, intlId: 'JakartaGBKS', coordinate: {longitude: 106.802769, latitude: -6.218696}}\n  ],\n  testingSample: {},  //正在测试的地理数据\n  testResult: {},     //用于charts的数据\n  requestNum: 0,     //主要用于计算倒计时百分比\n  testingItems: []   //正在测试中的请求items\n}\n\nexport default function processReducer(state = processState, action) {\n  switch (action.type) {\n    case ActionTypes.ADD_USER_LOCATION_COORDINATE:\n      let sampleCoords = state.sampleCoords\n      let userCoordinateItem = action.userSample\n      //remove if exist\n      for (let i = 0; i < sampleCoords.length; i++) {\n        const sample = sampleCoords[i]\n        if (sample.id === userCoordinateItem.id) {\n          sampleCoords.splice(i, 1)\n          break\n        }\n        i++\n      }\n      sampleCoords.unshift(userCoordinateItem)\n      return {...state, sampleCoords}\n    case ActionTypes.BENCHMARK:\n      return {\n        ...state,\n        state: CONSTS.PROCESS_STATE_RUNNING,\n        testingSample: action.sample,\n        testResult: {},\n        testingItems: []\n      }\n    case ActionTypes.PRE_START:   //需要做一些计算才能得到一些初始化的数据\n      return {\n        ...state,\n        requestNum: action.requestNum\n      }\n    // case ActionTypes.TICK_RUNNING_ITEM:  //添加正在运行item\n    //   state.testingItems.push(action.item)\n    //   return {...state}\n    case ActionTypes.TICK_CALCULATE_RESULT:  //when request finish, add item\n      state.testingItems.push(action.item)\n      return {...state}\n    case ActionTypes.TICK_FINISH_ITEM:  //item完成timing计算\n      let testingItems = state.testingItems\n      let id = findTestingItemIdx(testingItems, action.item)\n      if (id !== -1) {\n        testingItems[id] = {...testingItems[id], ...action.item}\n        return {...state}\n      }\n      return state\n    // state.testingItems.push(action.item)\n    // return {...state}\n    case ActionTypes.TICK_ERROR_ITEM:\n      // let id2 = findTestingItemIdx(state.testingItems, action.item)\n      // if (id2 !== -1) {\n      //   state.testingItems[id2] = {...state.testingItems[id2], ...action.item}\n      //   return {...state}\n      // }\n      // return state\n      state.testingItems.push(action.item)\n      return {...state}\n    case ActionTypes.FINISH_BENCKMARK:\n      let res = testingItemsForCharts(state.testingItems, action.maxLevel)\n      return {...state, state: CONSTS.PROCESS_STATE_FINISH, testResult: res}\n    case ActionTypes.TEST_AGAIN:\n      return {...state, testResult: {}, state: CONSTS.PROCESS_STATE_START}\n    default:\n      return state\n  }\n}\n\nfunction findTestingItemIdx(testingItems, searchItem) {\n  for (let i = testingItems.length - 1; i >= 0; i--) {\n    if (testingItems[i].id === searchItem.id) {\n      return i\n    }\n  }\n  return -1\n}\n\nfunction testingItemsForCharts(testingItems, maxLevel) {\n  let res = {}\n\n  let types = ['osm', 'map3']\n  let levelVar = {}\n  //init vars\n  types.forEach(type => {\n    for (let z = 1; z <= maxLevel; z++) {\n      if (!levelVar[type]) {\n        levelVar[type] = {}\n      }\n      if (!levelVar[type][z]) {\n        levelVar[type][z] = {}\n      }\n      levelVar[type][z]['min'] = 0\n      levelVar[type][z]['max'] = 0\n      levelVar[type][z]['avg'] = 0\n      levelVar[type][z]['sum'] = 0\n      levelVar[type][z]['count'] = 0\n      levelVar[type][z]['hadSet'] = false\n    }\n  })\n\n  testingItems.forEach(testItem => {\n    let z = parseInt(testItem.z)\n    if (testItem.state === 'finish') {\n      if (levelVar[testItem.type][z]['min'] === 0 && levelVar[testItem.type][z]['max'] === 0) { // first item fire\n        levelVar[testItem.type][z]['min'] = testItem.duration\n        levelVar[testItem.type][z]['max'] = testItem.duration\n      } else {\n        if (testItem.duration > levelVar[testItem.type][z]['max']) {\n          levelVar[testItem.type][z]['max'] = testItem.duration\n        }\n        if (testItem.duration < levelVar[testItem.type][z]['min']) {\n          levelVar[testItem.type][z]['min'] = testItem.duration\n        }\n      }\n\n      levelVar[testItem.type][z]['sum'] += testItem.duration\n      levelVar[testItem.type][z]['count'] += 1\n      levelVar[testItem.type][z]['hadSet'] = true\n    }\n  })\n\n  types.forEach(type => {\n    res[type] = []\n    for (let z = 1; z <= maxLevel; z++) {\n      if (levelVar[type][z]['hadSet']) {\n        let avgTime = levelVar[type][z]['sum'] / levelVar[type][z]['count']\n        // let avgTime = (levelVar[type][z]['min'] + levelVar[type][z]['max']) / 2\n        res[type].push([levelVar[type][z]['min'], levelVar[type][z]['max'], avgTime])\n      } else {\n        res[type].push([0, 0, 0])\n      }\n    }\n  })\n\n  return res\n}","import * as ActionTypes from '../actions/actionTypes'\n\nimport {supportedLocales} from \"../locale\";\n\nlet lang = sessionStorage.getItem('lang')\nif (!lang) {\n  lang = navigator.language.split('-')[0]\n  console.log(lang)\n}\nlet selectedLocale = findLocale(lang)\n\nconst localeState = {\n  ...selectedLocale\n}\n\nexport default function localeReducer(state = localeState, action) {\n  switch (action.type) {\n    case ActionTypes.CHANGE_LANGUAGE:\n      let locale = findLocale(action.lang)\n      return {...locale}\n    default:\n      return state\n  }\n}\n\nfunction findLocale(lang) {\n  let locale = supportedLocales[0]\n  for (let i = 0; i < supportedLocales.length; i++) {\n    if (supportedLocales[i].lang === lang) {\n      locale = supportedLocales[i]\n      break\n    }\n  }\n  return locale\n}","import {combineReducers} from \"redux\";\n\nimport user from './userReducer'\nimport process  from './processReducer'\nimport locales from './localesReducer'\n\nexport default combineReducers({\n  user,\n  process,\n  locales\n})","import * as Observable from \"rxjs\";\nimport {delay, map} from \"rxjs/operators\";\n\nexport const api = {\n  userName() {\n    return Observable.from(fetch(\"https://www.baidu.com/\", {mode: 'no-cors'})).pipe(\n      delay(1000),\n      map(ret => {\n        const ramdom = Math.random() >= 0.495\n        if (ramdom) {\n          return 'Moo' + ramdom\n        } else {\n          throw new Error('my error')\n        }\n      })\n    )\n  }\n}","//see: https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#ECMAScript_.28JavaScript.2FActionScript.2C_etc..29\n\nfunction long2tile(lon, zoom) {\n  return (Math.floor((lon + 180) / 360 * Math.pow(2, zoom)));\n}\n\nfunction lat2tile(lat, zoom) {\n  return (Math.floor((1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom)));\n}\n\nfunction tile2long(x, z) {\n  return (x / Math.pow(2, z) * 360 - 180);\n}\n\nfunction tile2lat(y, z) {\n  let n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return (180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n))));\n}\n\nexport class Tile {\n  constructor(z, x, y, lat, long) {\n    this.z = z\n    this.x = x\n    this.y = y\n    this.lat = lat\n    this.long = long\n  }\n\n  deg2num() {\n    this.x = long2tile(this.long, this.z)\n    this.y = lat2tile(this.lat, this.z)\n  }\n\n  num2deg() {\n    this.long = tile2long(this.x, this.z)\n    this.lat = tile2lat(this.y, this.z)\n  }\n\n  osmTileUrl() {\n    return `https://c.tile.openstreetmap.org/${this.z}/${this.x}/${this.y}.png`\n  }\n\n  map3TileUrl() {\n    return `https://tile.map3.network/v1/api/tile/${this.z}/${this.x}/${this.y}.pbf`\n    // https://120-79-153-67.tile.map3.network/\n    // return `https://120-79-153-67.tile.map3.network/v1/api/tile/${this.z}/${this.x}/${this.y}.pbf`\n  }\n}\n\nexport class BBoxTile {\n  constructor(topLeftTile, bottomRightTile) {\n    this.topLeftTile = topLeftTile\n    this.bottomRightTile = bottomRightTile\n  }\n}\n\nexport class BBoxLatLong {\n  constructor(topLeftLat, topLeftLong, bottomRightLat, bottomRightLong) {\n    this.topLeftLat = topLeftLat\n    this.topLeftLong = topLeftLong\n    this.bottomRightLat = bottomRightLat\n    this.bottomRightLong = bottomRightLong\n  }\n}\n\nexport function newTileWithLatLong(lat, long, z) {\n  let tile = new Tile(z, 0, 0, lat, long)\n  tile.deg2num()\n  return tile\n}\n\nexport function newTileWithXY(x, y, z) {\n  let tile = new Tile(z, x, y)\n  tile.num2deg()\n  return tile\n}\n\nexport function bboxTilesFromTile(topTile, bottomTile, minZ, maxZ) {\n  let tiles = []\n  if (minZ > maxZ) {\n    return tiles\n  }\n\n  for (let z = minZ; z <= maxZ; z++) {\n    let tTopLeft = newTileWithLatLong(topTile.lat, topTile.long, z)\n    let tBottomRight = newTileWithLatLong(bottomTile.lat, bottomTile.long, z)\n    for (let x = tTopLeft.x; x <= tBottomRight.x; x++) {\n      for (let y = tTopLeft.y; y <= tBottomRight.y; y++) {\n        let tile = newTileWithXY(x, y, z)\n        tiles.push(tile)\n      }\n    }\n  }\n  return tiles\n}\n\nexport function bboxTilesFromCoor(topLat, topLong, bottomLat, bottomLong, minZ, maxZ) {\n  let t1 = newTileWithLatLong(topLat, topLong, minZ)\n  let t2 = newTileWithLatLong(bottomLat, bottomLong, minZ)\n  return bboxTilesFromTile(t1, t2, minZ, maxZ)\n}","export const hashCode = function (s) {\n  let h = 0, l = s.length, i = 0;\n  if (l > 0)\n    while (i < l)\n      h = (h << 5) - h + s.charCodeAt(i++) | 0;\n  return h;\n};\n\nexport const groupBy = function (xs, key) {\n  return xs.reduce(function (rv, x) {\n    (rv[x[key]] = rv[x[key]] || []).push(x);\n    return rv;\n  }, {});\n};","import {newTileWithLatLong} from \"../geomaths/tilemath\";\nimport {from, range, of} from \"rxjs\";\nimport {concatMap} from \"rxjs/operators\";\nimport {hashCode} from \"../util/util\";\n\nfunction _fetch(fetch_promise, timeout) {\n  let abort_fn = null;\n\n  let abort_promise = new Promise(function (resolve, reject) {\n    abort_fn = function () {\n      reject('abort promise');\n    };\n  });\n\n  let abortable_promise = Promise.race([\n    fetch_promise,\n    abort_promise\n  ]);\n\n  setTimeout(function () {\n    abort_fn();\n  }, timeout);\n\n  return abortable_promise;\n}\n\nfunction fetchObs(url, z) {\n  // let cors = url.includes('osm_tile') ? 'cors' : 'no-cors'\n  // let myHeaders = new Headers({\n  //   // 'Access-Control-Allow-Origin': '*',\n  //   'pragma': 'no-cache',\n  //   'cache-control': 'no-cache'\n  // });\n  let myInit = {\n    // headers: myHeaders,\n    mode: 'no-cors',\n    cache: \"no-cache\",\n  }\n  return from(_fetch(fetch(`${url}&t=${(new Date()).getTime()}`, myInit), 5000).then(res => {\n      // console.log(res)\n      let item = newResultItemByUrlAndZ(url, z)\n      return {'what': 'requestFinish', item: (item || {id: hashCode(url), url})}\n    }, error => {\n      console.log(error)\n      let item = newResultItemByUrlAndZ(url, z)\n      if(item) {\n        item['state'] = 'error'\n      }\n      return {'what': 'requestError', item: (item || {id: hashCode(url), url, state: 'error'})}\n    })\n  )\n}\n\nexport class TileTestTask {\n  constructor(tile, requestTimes = 10) {\n    this.tile = tile\n    this.requestTimes = requestTimes\n  }\n\n  start() {\n    return range(1, this.requestTimes).pipe(\n      concatMap(i => {\n        return of(`${this.tile.osmTileUrl()}?osm_tile_t=${i}`, `${this.tile.map3TileUrl()}?map3_tile_t=${i}`)\n      }),\n      concatMap(url => {\n        return from(fetchObs(url, this.tile.z))\n      }),\n    )\n  }\n}\n\nexport function resourceTimingDuration(item) {\n  let url = `${item.url}?${item.type}_tile_t=${item.tick}`\n  // let resources = performance.getEntriesByName(url, \"resource\")\n  let resources = performance.getEntriesByType(\"resource\")\n  for (let i = resources.length - 1; i >= 0; i--) {\n    let resource = resources[i]\n    if (resource.name.includes(url)) {\n      // console.log(resource)\n      return getResourceDuration(resource)\n    }\n  }\n  return -1\n}\n\n//see: https://developer.mozilla.org/zh-CN/docs/Web/API/Resource_Timing_API/Using_the_Resource_Timing_API\nfunction getResourceDuration(resource) {\n  // let redirectTime = resource.redirectEnd - resource.redirectStart;\n  // let dnsTime = resource.domainLookupEnd - resource.domainLookupStart\n  // let tcpTime = resource.connectEnd - resource.connectStart\n  // let secureConnectTime = (resource.secureConnectionStart > 0) ? resource.connectEnd - resource.secureConnectionStart : 0\n  // let fetchResponseTime = resource.responseEnd - resource.fetchStart\n  return resource.responseEnd - resource.startTime\n}\n\nexport function generateTestTiles(latitude, longitude, maxLevel = 14) {\n  let tiles = []\n  for (let level = 1; level <= maxLevel; level++) {\n    let tile = newTileWithLatLong(latitude, longitude, level)\n    tiles.push(tile)\n  }\n  return tiles\n}\n\nexport function newResultItemByUrlAndZ(url, z) {\n  let res = newResultItemByUrl(url)\n  if (res) {\n    res.z = z\n  }\n  return res\n}\n\nexport function newResultItemByUrl(url) {\n  if (url && typeof url == 'string') {\n    let splitTarget = [{type: 'osm', t: '?osm_tile_t='}, {type: 'map3', t: '?map3_tile_t='}]\n    for (let i = 0; i < splitTarget.length; i++) {\n      let target = splitTarget[i]\n      let urls = url.split(target.t)\n      if (urls.length > 1) {\n        return {\n          id: hashCode(url),\n          url: urls[0],\n          tick: urls[1],\n          type: target.type,\n          state: 'running',\n          duration: 0\n        }\n      }\n    }\n  }\n  return null\n}\n\nexport function newResultItemByUrlAndPerformanceResTiming(url, perfResTiming) {\n  let res = newResultItemByUrl(url)\n  if (res) {\n    res['duration'] = perfResTiming.duration\n    res['state'] = 'finish'\n    return res\n  }\n  return null\n}","import {combineEpics} from \"redux-observable\";\n\nimport {requestUserName} from './userEpics'\nimport {benchmark, calculateTiming} from \"./processEpics\";\n\nexport default combineEpics(\n  requestUserName,\n  benchmark,\n  calculateTiming\n)","import {ofType} from \"redux-observable\";\nimport * as ActionTypes from '../actions/actionTypes'\nimport {catchError, map, mergeMap, takeUntil, filter} from \"rxjs/operators\";\nimport {api} from \"../services/api\";\nimport {of} from 'rxjs'\n\n//see: https://redux-observable.js.org/\nexport const requestUserName = actions$ => actions$.pipe(\n  ofType(ActionTypes.REQUEST_CHANGE_USER_NAME),\n  mergeMap(action => {\n    return api.userName().pipe(\n      map(name => ({type: ActionTypes.RECEIVED_USER_NAME, payload: name.toUpperCase()})),\n      takeUntil(actions$.pipe(\n        filter(action => action.type === ActionTypes.CANCEL_REQUEST_USER_NAME)\n      )),\n      catchError(error => of({type: ActionTypes.REQUEST_USER_NAME_FAIL, payload: error.message})))\n  })\n)","import {ofType} from \"redux-observable\";\nimport * as ActionTypes from '../actions/actionTypes'\nimport {mergeMap, concatMap, map, delay} from \"rxjs/operators\";\nimport {Observable, of} from 'rxjs'\nimport {generateTestTiles, resourceTimingDuration, TileTestTask} from \"../benchmark/benchmark\";\nimport {\n  calculateItemTiming,\n  finishBenchmark,\n  preStart,\n  tickErrorItem, tickFinishItem,\n  tickRunningItem\n} from \"../actions\";\n\nconst maxLevel = 14\nconst requestTimesOfEachTile = 10\n\n//see:\n// https://cn.rx.js.org/class/es6/Observable.js~Observable.html#instance-method-concatMap\n// https://redux-observable.js.org/docs/basics/Epics.html\nexport const benchmark = (actions$, state$) => {\n  return actions$.pipe(\n    ofType(ActionTypes.BENCHMARK),\n    mergeMap(action => {\n      performance.clearResourceTimings();\n      performance.setResourceTimingBufferSize(5000);\n\n      let sample = action.sample\n      let tiles = generateTestTiles(sample.coordinate.latitude, sample.coordinate.longitude, maxLevel)\n      let requestNum = 2 * tiles.length * requestTimesOfEachTile\n      return of({what: 'setRequestNum', num: requestNum}, ...tiles, {what: 'finish'})\n    }),\n    concatMap(act => {\n      if (act['what'] === 'finish') {\n        // delay 3s to wait for calculate timing result\n        return of(act).pipe(\n          delay(3000)\n        )\n      } else if (act['what'] === 'setRequestNum') {\n        return of(act)\n      } else {  // tile\n        return (new TileTestTask(act, requestTimesOfEachTile)).start()\n      }\n    }),\n    map(act => {\n      if (act['what'] === 'finish') {\n        postResult(state$.value.process)\n        return finishBenchmark(maxLevel)\n        // return {type:'tt'}\n      } else if (act['what'] === 'setRequestNum') {\n        return preStart(act['num'])\n      } else {  // is tile\n        if (act['what'] === 'preRequest') {\n          return tickRunningItem(act.item)\n        } else if (act['what'] === 'requestFinish') {\n          return calculateItemTiming(act.item)\n        } else if (act['what'] === 'requestError') {\n          return tickErrorItem(act.item, act.error)\n        }\n      }\n    }),\n  )\n}\n\nexport const calculateTiming = actions$ => {\n  return actions$.pipe(\n    ofType(ActionTypes.TICK_CALCULATE_RESULT),\n    delay(500),\n    mergeMap(action => {\n      return new Observable(emitter => {\n        let retryTimes = 10\n        let calculateFun = () => {\n          let item = action.item\n          let duration = resourceTimingDuration(item)\n          if (duration === -1) {\n            if (retryTimes > 0) {\n              setTimeout(() => {\n                calculateFun()\n                retryTimes--\n              }, 500)\n            } else {\n              // emitter.error(`Cannot find ${item.url} timing resource`)\n              item['state'] = 'error'\n              emitter.next(item)\n              emitter.complete()\n            }\n          } else {\n            item['duration'] = duration\n            item['state'] = 'finish'\n            emitter.next(item)\n            emitter.complete()\n          }\n        }\n\n        calculateFun()\n      })\n    }),\n    map(item => {\n      return tickFinishItem(item)\n    })\n  )\n}\n\nfunction postResult(processState) {\n  let params = {\n    coordinates: [],\n    map3: [],\n    osm: []\n  }\n  params.coordinates.push(processState.testingSample.coordinate.longitude)  //纬度\n  params.coordinates.push(processState.testingSample.coordinate.latitude) //经度\n\n  processState.testingItems.forEach(testItem => {\n    if (testItem.state === 'finish') {\n      params[testItem.type] && params[testItem.type].push({\n        url: testItem.url,\n        response_time: testItem.duration\n      })\n    }\n  })\n  fetch('https://test.tile.map3.network/tile/adanos/record', {\n    method: 'POST',\n    headers: new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded', // <-- Specifying the Content-Type\n    }),\n    body: `data=${JSON.stringify(params)}`\n  })\n    .then(res => res.json())\n    .then(res => console.log(res))\n}","import {createStore, applyMiddleware, compose} from 'redux';\nimport {createEpicMiddleware} from 'redux-observable';\nimport rootReducer from '../reducers';\nimport rootEpic from '../epics';\nimport logger from 'redux-logger'\n\nconst epicMiddleware = createEpicMiddleware();\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport default function configureStore() {\n  const store = createStore(\n    rootReducer,\n    composeEnhancers(\n      applyMiddleware(\n        epicMiddleware,\n        logger\n      )\n    )\n  );\n  epicMiddleware.run(rootEpic);\n  return store\n}","import {connect} from 'react-redux';\nimport {IntlProvider} from 'react-intl';\n\n//see: https://github.com/yahoo/react-intl/issues/243\n\n// This function will map the current redux state to the props for the component that it is \"connected\" to.\n// When the state of the redux store changes, this function will be called, if the props that come out of\n// this function are different, then the component that is wrapped is re-rendered.\nfunction mapStateToProps(state) {\n  const {lang, messages} = state.locales;\n  return {locale: lang, key: lang, messages};\n}\n\nexport default connect(mapStateToProps)(IntlProvider);","import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport Typography from \"@material-ui/core/Typography\";\nimport Main from \"./containers/main\";\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom'\nimport {Provider} from \"react-redux\";\nimport withRoot from \"./withRoot\";\nimport configureStore from \"./store/configureStore\";\nimport ConnectedIntlProvider from './connectedIntlProvider'\n\nconst store = configureStore()\n\nclass _App extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <ConnectedIntlProvider>\n          <Router basename=\"/adanos\">\n          {/*see: https://medium.com/@Dragonza/react-router-problem-with-gh-pages-c93a5e243819*/}\n          {/*<Router basename={process.env.PUBLIC_URL}>*/}\n            <Switch>\n              <Route exact={true} path=\"/\" component={Main}/>\n              <Route component={NoMatch}/>\n            </Switch>\n          </Router>\n        </ConnectedIntlProvider>\n      </Provider>\n    )\n  }\n}\n\nconst App = withRoot(_App)\n\nfunction NoMatch({location}) {\n  return (\n    <div>\n      <Typography variant={\"h6\"}>\n        Sorry, the page does not exist!\n      </Typography>\n    </div>\n  );\n}\n\nReactDOM.render(<App/>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}